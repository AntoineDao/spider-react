(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(304)},137:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),l=a.n(s),o=(a(137),a(21)),i=a(22),c=a(24),u=a(23),h=a(25),d=a(35),p=a(40),g=a(56),m=a(41),f={surfaceMeshes:!0,surfaceEdges:!0,surfaceOpenings:!0,string:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE":return Object(m.a)({},e,Object(g.a)({},t.toggle.name,t.toggle.bool));case"LOAD_STRING":return Object(m.a)({},e,{string:t.string});default:return e}},w=a(27),E=a(106),v=a.n(E),O=a(42),y=a.n(O),x=a(110),j=a.n(x),k=a(107),S=a.n(k),M=a(108),D=a.n(M),C=a(109),I=a.n(C),T=a(32),H=a.n(T),L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:"recents",upload:!1},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return r.a.createElement(v.a,{value:t,onChange:this.handleChange,className:e.background},r.a.createElement(H.a,{className:e.absolute,elevation:2},r.a.createElement(y.a,{label:"Recents",value:"recents",icon:r.a.createElement(S.a,null)}),r.a.createElement(y.a,{label:"Favorites",value:"favorites",icon:r.a.createElement(D.a,null)}),r.a.createElement(y.a,{label:"Nearby",value:"nearby",icon:r.a.createElement(I.a,null)}),r.a.createElement(y.a,{label:"Folder",value:"folder",icon:r.a.createElement(j.a,null,"folder"),onClick:this.props.toggleUpload})))}}]),t}(r.a.Component),N=Object(w.withStyles)(function(e){return{background:{backgroundColor:"#fafafa"},absolute:{position:"absolute",zIndex:1,bottom:3*e.spacing.unit}}})(L),U=a(61),G=a(43),A=a.n(G),F=a(71),_=a(19),z=a(14),B=a(111),R=a.n(B),P=a(44),X=a(112),W=a.n(X),V=(a(113),function(e){return{type:"TOGGLE",toggle:e}}),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).zoomObjectBoundingSphere=function(e,t){var n=(new z.Box3).setFromObject(e).getBoundingSphere(new z.Sphere),r=n.center,s=n.radius;a.controls.reset(),a.controls.target.copy(r),a.controls.maxDistance=5*s,a.camera.position.copy(r.clone().add(new z.Vector3(1*s,-1*s,1*s))),a.camera.far=10*s,a.camera.updateProjectionMatrix(),a.lightDirectional.position.copy(r.clone().add(new z.Vector3(-1.5*s,-1.5*s,1.5*s))),a.lightDirectional.shadow.camera.scale.set(.2*s,.2*s,.01*s),a.axesHelper||(a.axesHelper=new z.AxesHelper(1),a.axesHelper.name="axesHelper",a.scene.add(a.axesHelper)),a.axesHelper.scale.set(s,s,s),a.axesHelper.position.copy(r),a.lightDirectional.target=a.axesHelper,t.userData.center=r,t.userData.radius=s},a.start=a.start.bind(Object(_.a)(Object(_.a)(a))),a.stop=a.stop.bind(Object(_.a)(Object(_.a)(a))),a.animate=a.animate.bind(Object(_.a)(Object(_.a)(a))),a.defaultgbXML="https://raw.githubusercontent.com/ladybug-tools/spider/5b4575f2d1905e1aedf282603fc4155bb679ba18/read-gbxml/data-files/sam-live2.xml",a.state={sceneRotation:1,cameraHelper:null,width:window.innerWidth,height:window.innerHeight,surfaceMeshes:new z.Group({name:"surfaceMeshes"}),surfaceEdges:new z.Group({name:"surfaceEdges"}),surfaceOpenings:new z.Group({name:"surfaceOpenings"})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){console.log(e),e.specificProperty,this.props.specificProperty}},{key:"loadDefaultFile",value:function(){var e=Object(F.a)(A.a.mark(function e(){var t,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get(this.defaultgbXML);case 2:t=e.sent,a=t.data,this.props.dispatch({type:"LOAD_STRING",string:a}),this.gbxmlToThree();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gbxmlToThree",value:function(){var e,t,a,n=this.props.gbxml.string,r=P.gbXMLParser.parseFileXML(n);(e=this.state.surfaceMeshes).add.apply(e,Object(U.a)(P.threeGenerator.getSurfaceMeshes(r))),(t=this.state.surfaceEdges).add.apply(t,Object(U.a)(P.threeGenerator.getSurfaceEdges(this.state.surfaceMeshes))),(a=this.state.surfaceOpenings).add.apply(a,Object(U.a)(P.threeGenerator.getOpenings(r))),this.zoomObjectBoundingSphere(this.state.surfaceEdges,this.state.surfaceMeshes)}},{key:"componentDidMount",value:function(){var e=Object(F.a)(A.a.mark(function e(){var t,a,n,r,s,l,o,i,c,u,h;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mount.clientWidth,a=this.mount.clientHeight,n=new z.Scene,(r=new z.PerspectiveCamera(40,t/a,.1,1e3)).up.set(0,0,1),s=new z.WebGLRenderer({alpha:1,antialias:!0}),l=new z.AmbientLight(4473924),n.add(l),(o=new z.DirectionalLight(16777215,1)).shadow.mapSize.width=2048,o.shadow.mapSize.height=2048,o.castShadow=!0,n.add(o),i=new z.PointLight(16777215,.5),r.add(i),c=z.AxesHelper(1),n.add(c),r.position.z=4,n.add(r),s.setSize(window.innerWidth,window.innerHeight),s.shadowMap.enabled=!0,s.shadowMap.type=z.PCFSoftShadowMap,u=R()(z),(h=new u(r,s.domElement)).autoRotate=!1,this.controls=h,this.lightDirectional=o,this.scene=n,this.camera=r,this.renderer=s,e.next=32,this.loadDefaultFile();case 32:console.log(this.state.surfaceMeshes.children[0].userData),this.controls.update(),this.mount.appendChild(this.renderer.domElement),this.start();case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.scene.remove(this.state.surfaceMeshes),this.scene.remove(this.state.surfaceEdges),this.scene.remove(this.state.surfaceOpenings),this.props.gbxml.surfaceMeshes&&this.scene.add(this.state.surfaceMeshes),this.props.gbxml.surfaceEdges&&this.scene.add(this.state.surfaceEdges),this.props.gbxml.surfaceOpenings&&this.scene.add(this.state.surfaceOpenings),this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate)}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{position:"relative",left:0,top:0,width:"".concat(window.innerWidth-200,"px"),height:"".concat(window.innerHeight-200,"px"),zIndex:0},ref:function(t){e.mount=t},status:this.props.gbxml})}}]),t}(r.a.Component),J=Object(d.b)(function(e){return console.log("STATE"),{gbxml:e.gbxml}})(q),$=a(119),K=a.n($),Q=a(122),Y=a.n(Q),Z=a(34),ee=a.n(Z),te=a(120),ae=a.n(te),ne=a(121),re=a.n(ne),se=a(59),le=a.n(se),oe=a(60),ie=a.n(oe),ce=a(118),ue=a.n(ce),he=a(58),de=a.n(he),pe=a(114),ge=a.n(pe),me=a(115),fe=a.n(me),be=a(117),we=a.n(be),Ee=a(20),ve=a.n(Ee),Oe=a(116),ye=a.n(Oe),xe=Object(d.b)(function(e){return{surfaceMeshes:e.gbxml.surfaceMeshes,surfaceEdges:e.gbxml.surfaceEdges,surfaceOpenings:e.gbxml.surfaceOpenings}},function(e){return{toggleMeshes:function(t){return e(V({name:"surfaceMeshes",bool:t.target.checked}))},toggleEdges:function(t){return e(V({name:"surfaceEdges",bool:t.target.checked}))},toggleOpenings:function(t){return e(V({name:"surfaceOpenings",bool:t.target.checked}))}}})(function(e){var t=e.surfaceMeshes,a=e.surfaceEdges,n=e.surfaceOpenings,s=e.toggleMeshes,l=e.toggleEdges,o=e.toggleOpenings;return r.a.createElement(ge.a,null,r.a.createElement(fe.a,{expandIcon:r.a.createElement(ye.a,null)},r.a.createElement(ve.a,null,"Toggles")),r.a.createElement(we.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,null,r.a.createElement(le.a,{control:r.a.createElement(ie.a,{checked:t,onChange:s,value:"surfaceMeshes"}),label:"Surface Meshes"})),r.a.createElement(de.a,null,r.a.createElement(le.a,{control:r.a.createElement(ie.a,{checked:a,onChange:l,value:"surfaceEdges"}),label:"Surface Edges"})),r.a.createElement(de.a,null,r.a.createElement(le.a,{control:r.a.createElement(ie.a,{checked:n,onChange:o,value:"surfaceOpenings"}),label:"Surface Openings"})))))}),je=Object(w.withStyles)(function(e){return{root:{display:"flex",zIndex:e.zIndex.appBar-1},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(m.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"})}},{withTheme:!0})(function(e){var t=e.classes,a=e.theme,n=e.open;return r.a.createElement("div",{className:t.root,zIndex:a.zIndex.appBar-1},r.a.createElement(K.a,{className:t.drawer,anchor:"left",open:n,classes:{paper:t.drawerPaper},onClose:e.toggleDrawer},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(ee.a,{onClick:e.toggleDrawer},"ltr"===a.direction?r.a.createElement(ae.a,null):r.a.createElement(re.a,null))),r.a.createElement(Y.a,null),r.a.createElement(xe,null)))}),ke=a(123),Se=a.n(ke),Me=a(124),De=a.n(Me),Ce=a(125),Ie=a.n(Ce);var Te=Object(w.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},appBar:{zIndex:"1400",position:"relative"},menuButton:{marginLeft:-12,marginRight:20}}},{withTheme:!0})(function(e){var t=e.classes;return r.a.createElement(Se.a,{className:t.appBar},r.a.createElement(De.a,null,r.a.createElement(ee.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:e.toggleDrawer},r.a.createElement(Ie.a,null)),r.a.createElement(ve.a,{variant:"h6",color:"inherit",className:t.grow},"Spider"),r.a.createElement(ve.a,{variant:"h7",color:"inherit",className:t.grow},"gbXML Viewer")))}),He=a(57),Le=a.n(He),Ne=a(126),Ue=a.n(Ne),Ge=a(130),Ae=a.n(Ge),Fe=a(128),_e=a.n(Fe),ze=a(129),Be=a.n(ze),Re=a(127),Pe=a.n(Re),Xe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={file:null},a.handleFileRead=function(e){e.preventDefault(),a.props.toggleUpload()},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.readAsArrayBuffer(a),console.log(a),n.onload=function(e){var a=n.result,r=new TextDecoder;t.setState({file:r.decode(a)})}}},{key:"render",value:function(){return r.a.createElement(Ue.a,{open:this.props.open,onClose:this.props.toggleUpload,"aria-labelledby":"form-dialog-title"},r.a.createElement(Pe.a,{id:"form-dialog-title"},"Upload File"),r.a.createElement("form",{onSubmit:this.handleFileRead.bind(this)},r.a.createElement(_e.a,null,r.a.createElement(Be.a,null,"Upload a file to the viewer from your local machine or an appropriate file reachable through download (eg: a github gist or raw file)"),r.a.createElement("input",{type:"file",onChange:this.onChange.bind(this)})),r.a.createElement(Ae.a,null,r.a.createElement(Le.a,{onClick:this.props.toggleUpload,color:"primary"},"Cancel"),r.a.createElement(Le.a,{type:"submit",color:"primary"},"Upload"))))}}]),t}(r.a.Component),We=a(131),Ve=a.n(We),qe=Object(p.c)(Object(p.b)({gbxml:b}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Je=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={drawer:!1,upload:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggleDrawer",value:function(){this.setState({drawer:!this.state.drawer})}},{key:"toggleUpload",value:function(){this.setState({upload:!this.state.upload})}},{key:"render",value:function(){return r.a.createElement(d.a,{store:qe},r.a.createElement(Ve.a,null),r.a.createElement(Te,{toggleDrawer:this.toggleDrawer.bind(this)}),r.a.createElement(je,{open:this.state.drawer,toggleDrawer:this.toggleDrawer.bind(this)}),r.a.createElement(J,null),r.a.createElement(N,{toggleUpload:this.toggleUpload.bind(this)}),r.a.createElement(Xe,{open:this.state.upload,toggleUpload:this.toggleUpload.bind(this)}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[132,1,2]]]);
//# sourceMappingURL=main.77a2cf98.chunk.js.map